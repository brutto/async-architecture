# Async-architecture

Схема проекта: https://drive.google.com/file/d/1lCMPUFgeP32-X7eUG3qthMjz_Dd_O9Tz/view?usp=sharing

## Как это работает

Система разделена на 3 компонента, каждый из которых выполняет/обслуживает свою бизнес-логику:
- Менеджер задач
- Аккаунтинг/Биллинг
- Аналитика

Часть бизнес-логики реализована непосредственно в самих компонентах синхронно, а часть реализуется через асинхронные потоки событий, единой шины данных и обработчиков этих событий. 

Для оперативного доступа к данным компонентов используется синхронное API. 


## Узкие места/вопросы
- Роли в каждом проекте свои, но можно сделать и общую схему хранения.
- Mass assignment event listener. Массовое переназначение невыполненных задач нужно сделать такое кол-во раз, сколько раз была нажата кнопка, поэтому или делать обработку событий строго в один поток или городить логику для обработки мультворкеров.
- Task edit event. Можно использовать для синхронизации описания задач в других сервисах.
- Task assign/done event listener (Ananlitycs). Занимается аггрегацией по дням.
- Вопрос по синхронной работе через API для получения данных частично можно решить async-синхронизацией (Task edited event) или локальным фолбеком (Accounting aggegate by DB) 
- Mass payment event listener. Вопрос как лучше реализовать параллельные массовые операции, что бы не потерять события, если рантайм вдруг "закончится".

## Траблшутинг

Максимальная изоляция сервисов позволит уменьшить эффекты внезпных "падений". Самая слабая точка это синхронное API. Эта зависимость может привести к сторонним эффектам на связных сервисах.
